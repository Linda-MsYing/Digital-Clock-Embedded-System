贺莺琦 520021910587 大作业“智能时钟”用户手册

一、开机显示、睡眠状态、三种重启方式（reset）、五种工作状态

（一）开机显示
重启或接电时，出现如下开机画面：
（1）八位LED闪烁两次.
（2）数码管先分两行闪烁学号520021910587；再闪烁“HELLO”的开机欢迎话语.
（3）蜂鸣器演奏“1234567”的旋律.
（4）串口端输出欢迎语“Dear user,welcome to timer!”.
（5）紧接着显示12小时制时钟（即模式1），初始时间为00：00：00。

（二）睡眠状态
当智能时钟短时间闲置时可以通过按键使其进入睡眠状态：
进入睡眠状态方式：长按或者短按SW7；
睡眠状态工作情况：数码管停止闪烁显示；8位LED灯熄灭表示智能时钟停止工作。

（三）三种重启方式
用户可以通过I2C按键、串口或者硬件RESET按键使智能时钟重启：
1，同时按下SW7和SW8，智能时钟自动重启；
2，向串口发送“RESET”命令（不区分大小写，空格自动容错），智能时钟自动重启；
3，直接摁下RESET按键，实现硬件重启。
以上三种方式效果完全相同。

（四）五种工作状态
智能时钟有以下五种工作状态，5种状态可以通过SW1切换
1，12小时制时钟：
作为时钟1；可以暂停、按位设置（设置时自动规范范围，保证示数在12小时以内）；初始时间为00：00：00；
2，24小时制时钟：
作为时钟2；可以暂停、按位设置（设置时自动规范范围，保证示数在24小时以内）；满24小时会对日期进行进位；初始时间为12：00：00；
（注：时钟1和时钟2是相互独立的）
3，日期显示：
可以显示年份后两位、月份和日期；可以按位设置；初始日期为22-06-12；
4，倒计时功能：
可以进行1小时内的倒计时；可以暂停、按位设置；精确到0.01s；倒计时结束后蜂鸣器鸣叫提示；初始值为00：15：00（即15秒）；
5，闹钟显示和设置：
显示闹钟时间；可以按位设置；闹钟对时钟1和时钟2 都有效；
时间到达预定的闹钟时间后，蜂鸣器产生闹铃声——歌曲“小星星”提醒，可以通过按下SW6或者串口输入“CLOSEALARM”关闭闹铃声。


二、SW1-8按键使用方式和功能实现说明（开关皆已经进行去抖处理）

1，SW1：5工作状态的切换
初始状态为时钟1（12小时制时钟），按下SW1即切换进入下一状态。
时钟1（状态1）——>时钟2（状态2）——>日期显示（状态3）——>倒计时功能（状态4）——>闹钟显示和设置（状态5）——>时钟1（状态1）

2，SW2：表示暂停和运行
时钟1、时钟2、倒计时模式下，初始状态为运行，当按下SW2后，数码管停止闪烁，系统不再计时，智能时钟暂停；
再次按下SW2后，智能时钟重新进入运行状态。

3，SW3、SW4：6位数值的设置
SW3和SW4共同用于按位设置数值：
SW3表示选中的是第几位：初始状态下选中最低位（第6位），此后每摁下一次SW3，选中位左移一位；移至最左位后摁下SW3选中位重新回到最低位；
SW4表示数值变化：每按下SW4一次，选中位数值加一。
时钟1、时钟2、日期、闹钟在设置时会通过进位、减特定数值等方式对设置范围进行自动规范，保证设置的数值在对应钟表显示范围内。

4，SW5：系统初始化
按下SW5后，时钟1、时钟2、日期、倒计时、闹钟都回到初始设定值，并且进入暂停状态。
之后，先按一次SW2，再按一次SW1，智能时钟即恢复运行状态，各工作模式都以初始值开始工作。

5，SW6：关闭闹铃声
当闹钟时间到，蜂鸣器演奏“小星星”闹铃时，长按SW6即可关闭闹铃。

6，SW7：进入睡眠模式
按下SW7，智能时钟进入睡眠模式（见一）；再次按下SW7，智能时钟恢复工作模式；

7，同时按SW7、SW8：智能时钟重启

三、UART串口通讯功能实现说明
注1：以下所有指令都不区分大小写，对空格有容错功能
注2：输入命令后串口会自动重复命令进行确认
1、输入一个字符'?'，即可获得所有合法指令。
串口输出：
you can put in:
INITCLOCK
CLOSEALARM
SETTIME1XX:XX:XX
SETTIME2XX:XX:XX
SETDATEXX-XX-XX
SETALARMTIMEXX:XX:XX
GETTIME1
GETTIME2
GETDATE
GETALARM
RESET

2，重启命令
RESET			智能时钟重启

3、时钟相关指令
INITCLOCK 		将时钟1初始化为00:00:00，时钟2初始化为12：00：00
（回复可输入的其他指令）
SETTIME1   00:55:50	 	将时钟1的当前时间设为00：55：50
SETTIME2   13:55:50	 	将时钟1的当前时间设为13：55：50
GETTIME1		获取时钟1当前时间
（回复时钟1当前时间）
GETTIME2		获取时钟2当前时间
（回复时钟2当前时间）

4、日期相关指令
SETDATE22-06-13		将日期设为22年6月13日
GETDATE			获取当前日期
（回复当前日期）

5、闹钟相关指令
当闹钟响起时，会输出“Alarm is ringing"
当使用SW6将闹钟关闭后，会输出”Alarm has been closed"
CLOSEALARM		关闭闹铃声
（回复闹钟已关提示：“Alarm has been closed"，并提示可能的输入命令）
SETALARMTIME00：01：00	将闹钟设为0时1分0秒
GETALARM		获取当前闹钟时间
（回复闹钟时间）

6、当输入不合规范时，会根据自动首字母提示用户可能想表达的命令的正确格式。